"use strict";function loadingSite(){if($("body").hasClass("loaded"))$(".home-loader").addClass("displayNone");else{settings.loaderTime++,$(".home-loader .load-bar p").html(settings.loaderTime+" %"),$(".home-loader .load-bar div").css("width",settings.loaderTime+"%");var t=setTimeout(function(){loadingSite()},20);100===settings.loaderTime&&(clearTimeout(t),$(".home-loader .to-fade").addClass("fade"),$(".home-loader .panel").addClass("active"),setTimeout(function(){$(".home-loader").addClass("displayNone"),$("body").addClass("loaded")},2e3))}}function changeMenuButton(){$(".menu").toggleClass("visible"),$(".menu-button").hasClass("active")?($(".menu-button").removeClass("rotate"),setTimeout(function(){$(".menu-button").removeClass("active")},500)):($(".menu-button").addClass("active"),setTimeout(function(){$(".menu-button").addClass("rotate")},500))}function detectMouseWheel(t){var o=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";"home"===t||"contact"===t?$(".home, .contact").bind(o,function(o){var e=window.event||o;e=e.originalEvent?e.originalEvent:e;var n=e.detail?-40*e.detail:e.wheelDelta;"home"===t&&0>n&&slide(t,!0,!0),"contact"===t&&n>0&&slide(t,!1,!0)}):$(".portfolio .content .presentation").bind(o,function(o){var e=window.event||o;e=e.originalEvent?e.originalEvent:e;var n=e.detail?-40*e.detail:e.wheelDelta;n>0?slide(t,!1,!0):slide(t,!0,!0)})}function slide(t,o,e,n){$(".menu-button").removeClass("show"),e===!0?"home"===t?(location.replace("#projects"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):"contact"===t?(location.replace("#projects"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown2")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):o===!0?(location.replace("#contact"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown2")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):(location.replace("#home"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):($(".menu").removeClass("visible"),$(".menu-button").removeClass("rotate"),setTimeout(function(){$(".menu-button").removeClass("active")},500),"home"===t&&("home"!==o?"projects"===o?(location.replace("#projects"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):(location.replace("#contact"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown2")},500)},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},2200)):$(".menu-button").addClass("show")),"projects"===t&&("projects"!==o?"home"===o?(location.replace("#home"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):(location.replace("#contact"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown2")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):$(".menu-button").addClass("show")),"contact"===t&&("contact"!==o?"projects"===o?(location.replace("#projects"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown2")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)):(location.replace("#home"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown2"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown")},500)},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},2200)):$(".menu-button").addClass("show")),"project"===t&&("projects"===o&&($(".menu-button").removeClass("show"),$("#project #close-load").addClass("on"),setTimeout(function(){$("#project #close-load").addClass("load"),setTimeout(function(){$("#project .content-project").addClass("invisible"),setTimeout(function(){$("#project").removeClass("visible"),setTimeout(function(){$("#project").removeClass("transitionOut"),$("#project").html(""),$(".menu-button").addClass("show"),$(window).unbind(n),location.replace("#projects")},500)},500)},500)},800)),"home"===o&&($(".menu-button").removeClass("show"),$("#project #close-load").addClass("on"),setTimeout(function(){$("#project #close-load").addClass("load"),setTimeout(function(){$("#project .content-project").addClass("invisible"),setTimeout(function(){$("#project").removeClass("visible"),setTimeout(function(){$("#project").removeClass("transitionOut"),$("#project").html(""),setTimeout(function(){$(".menu-button").addClass("show")},2e3),$(window).unbind(n),location.replace("#projects")},500)},500)},500)},800),setTimeout(function(){location.replace("#home"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").removeClass("slidedown")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)},2500)),"contact"===o&&($(".menu-button").removeClass("show"),$("#project #close-load").addClass("on"),setTimeout(function(){$("#project #close-load").addClass("load"),setTimeout(function(){$("#project .content-project").addClass("invisible"),setTimeout(function(){$("#project").removeClass("visible"),setTimeout(function(){$("#project").removeClass("transitionOut"),$("#project").html(""),setTimeout(function(){$(".menu-button").addClass("show")},2e3),$(window).unbind(n),location.replace("#projects")},500)},500)},500)},800),setTimeout(function(){location.replace("#contact"),$(".home .content, .portfolio .content, .contact .content").addClass("dezoom"),setTimeout(function(){$(".home, .portfolio, .contact").addClass("slidedown2")},500),setTimeout(function(){$(".home .content, .portfolio .content, .contact .content").removeClass("dezoom")},1300)},2500))))}function showItemsProjects(t){var o=$(".portfolio #list-projects > ul > li");$(o).css("width",$(".presentation").offset().left+"px");var e=parseInt($(window).height()/300);if($(window).height()/300-Math.floor($(window).height()/300)>.5&&e++,t===!0){var n;for(n=0;e>n;n++)setTimeout(function(t,o){$(t[o]).addClass("show")},800*n,o,n)}else setTimeout(function(){$(".portfolio #list-projects > ul > li").css("width",$(".presentation").offset().left+"px"),$(".portfolio #list-projects > ul > li").addClass("showWithoutTransition")},50);for(n=e;n<o.length;n++)$(o[n]).bind("inview",function(t,o,e,n){o&&"both"===n&&($(this).addClass("show"),$(this).unbind("inview"))})}function loadProject(t,o,e){settings.clickOn&&(settings.clickOn=!1,$(".portfolio #list-projects > ul > li").css("opacity",0),$(".portfolio #list-projects > ul > li").css("visibility","hidden"),$("#p-load").css({background:"url(./img/projets/"+o+".jpg) no-repeat center "+e+"px","-webkit-background-size":"cover","background-size":"cover",opacity:1,"z-index":10,top:$("#list-projects button.project-"+t).offset().top+"px","-webkit-transition":"top 1s ease, width .5s ease, height 1s ease",transition:"top 1s ease, width .5s ease, height 1s ease"}),setTimeout(function(){$("#p-load").css({top:$(window).height()/2-150+"px"})},200),setTimeout(function(){$("#p-load").css({width:"100%","-webkit-transition":"top 1s ease, width .5s ease, height 1s ease, background-position 1s ease, opacity .5s ease",transition:"top 1s ease, width .5s ease, height 1s ease, background-position 1s ease, opacity .5s ease"}),$(".presentation").addClass("invisible"),$(".menu-button").removeClass("show"),setTimeout(function(){$("#p-load").css({height:"100%",top:"0"}),1!==t&&$("#p-load").css({"background-position":"center center"})},1200)},1e3),setTimeout(function(){$(".portfolio #list-projects > ul > li").css("opacity",1),$(".portfolio #list-projects > ul > li").css("visibility","visible"),$(".presentation").removeClass("invisible"),$("#p-load").css({opacity:0}),location.replace("#projects/"+t),setTimeout(function(){$("#p-load").css({background:"none","z-index":-1,top:"auto",width:"76%",height:"300px"}),setTimeout(function(){settings.clickOn=!0},500)},1e3)},3200))}function timelineScroll(t){$(t).hasClass("start")?($(".detail-project").scrollTo(0,{duration:800}),$("#project .back-blur").removeClass("blur")):$(t).hasClass("end")?($(".detail-project").scrollTo($(".last-section").position().top,{duration:800}),$("#project .back-blur").addClass("blur")):($(".detail-project").scrollTo($(".mockup_"+$(t).attr("data-id")).position().top,{duration:800}),$("#project .back-blur").addClass("blur"))}function timelineProgress(t){var o=$("#project .timeline").height()*t.scrollTop/($(".contain-sections").height()-$(".one-section").height());$("#project .timeline .line div").css("height",o+"px");for(var e=$(".button_m"),n=0;n<e.length;n++)o>=$(e[n]).position().top?$(e[n]).addClass("active"):$(e[n]).removeClass("active")}function changeProject(t,o,e){"close"===t?($(".menu-button").removeClass("show"),$("#project #close-load").addClass("on"),setTimeout(function(){$("#project #close-load").addClass("load"),setTimeout(function(){$("#project .content-project").addClass("invisible"),setTimeout(function(){$("#project").removeClass("visible"),setTimeout(function(){$("#project").removeClass("transitionOut"),$("#project").html(""),$(".menu-button").addClass("show"),$(window).unbind(o),location.replace("#projects")},500)},500)},500)},800)):($("#project #close-load").hasClass("proj-left")&&$("#change-load").addClass("proj-left"),$(".menu-button").removeClass("show"),$("#change-load").addClass("on"),setTimeout(function(){$("#change-load").addClass("load"),setTimeout(function(){$("#change-load").toggleClass("proj-left"),location.replace("#projects/"+e),setTimeout(function(){$("#change-load").removeClass("load"),setTimeout(function(){$(".menu-button").addClass("show"),$("#change-load").removeClass("on")},500)},700)},700)},800))}function initializeMap(){var t={monTheme:[{featureType:"all",stylers:[{saturation:-100},{gamma:.5}]}]},o=new google.maps.LatLng(48.8841996,2.4226105),e={center:o,zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!0,mapTypeId:"monTheme"},n=new google.maps.Map(document.getElementById("map"),e),s=new google.maps.StyledMapType(t.monTheme,{name:"monTheme"});n.mapTypes.set("monTheme",s);new google.maps.Marker({position:o,map:n,icon:{url:"./img/marker.png",size:new google.maps.Size(150,120),anchor:new google.maps.Point(28,120)}})}var settings={loaderTime:0,home:!1,projects:!1,detailProject:!1,contact:!1,app:null,clickOn:!0},AppRouter=Backbone.Router.extend({routes:{"":"home",home:"home",projects:"projects","projects/:id":"projectDetails",contact:"contact","*notFound":"home"},initialize:function(){this.projectList=new ProjectList},home:function(){location.replace("#home"),$(".menuUl").attr("data-location","home"),settings.home===!0||settings.home!==!0&&settings.projects===!0||settings.home!==!0&&settings.contact===!0?setTimeout(function(){$(".menu-button").addClass("show")},4e3):(console.log("test"),setTimeout(function(){$(".home .title h1, .home .title .seperate, .home .title p, .home .scrolldown, .home .made-by").addClass("show"),setTimeout(function(){$(".menu-button").addClass("show")},2e3)},4e3)),setTimeout(function(){detectMouseWheel("home")},4500),$(".scrolldown").click(function(){slide("home",!0,!0)}),settings.home=!0},projects:function(){$(".menuUl").attr("data-location","projects"),settings.contact!==!0?settings.detailProject!==!0?settings.home!==!0?($(".home .title h1, .home .title .seperate, .home .title p, .home .scrolldown, .home .made-by").addClass("show"),$(".home, .portfolio, .contact").addClass("slidedown"),setTimeout(function(){$(".presentation, .presentation h2, .presentation > p, .presentation .mourgues, .presentation .name").addClass("show"),setTimeout(function(){$(".menu-button").addClass("show")},500),setTimeout(function(){showItemsProjects(!0)},1800)},4500)):setTimeout(function(){$(".presentation, .presentation h2, .presentation > p, .presentation .mourgues, .presentation .name").addClass("show"),setTimeout(function(){$(".menu-button").addClass("show")},500),setTimeout(function(){showItemsProjects(!0)},2100)},2e3):showItemsProjects(!1):settings.home===!0?setTimeout(function(){$(".presentation, .presentation h2, .presentation > p, .presentation .mourgues, .presentation .name").addClass("show"),setTimeout(function(){$(".menu-button").addClass("show")},500),setTimeout(function(){showItemsProjects(!0)},2100)},2e3):(setTimeout(function(){$(".menu-button").addClass("show")},1500),showItemsProjects(!1)),detectMouseWheel("projects"),settings.projects!==!0&&settings.detailProject!==!0&&this.projectList.fetch({success:function(){$("#list-projects").html(new ProjectListView({model:settings.app.projectList}).render().el)}}),settings.projects=!0},projectDetails:function(t){$(".menuUl").attr("data-location","project"),$("#project").addClass("visible"),setTimeout(function(){$("#project").addClass("transitionOut")},100),settings.projects!==!0&&settings.detailProject!==!0?($(".home .title h1, .home .title .seperate, .home .title p, .home .scrolldown, .home .made-by").addClass("show"),$(".home, .portfolio, .home .content, .portfolio .content").addClass("slidedown"),this.projectList.fetch({success:function(){$("#list-projects").html(new ProjectListView({model:settings.app.projectList}).render().el)}}),$(".presentation, .presentation h2, .presentation > p, .presentation .mourgues, .presentation .name").addClass("show"),showItemsProjects(!1),this.projectList.fetch({success:function(){settings.app.project=settings.app.projectList.get(t),settings.app.projectView=new ProjectView({model:settings.app.project}),$("#project").html(settings.app.projectView.render().el)}}),setTimeout(function(){$("#project .presentation-project").addClass("show"),setTimeout(function(){$(".menu-button, #project .presentation-project div, #project .presentation-project .nav li").addClass("show")},500),setTimeout(function(){t%2===0?$("#project .contain-sections").css("width",$("#project").width()-$("#project .presentation-project-container").width()+"px"):$("#project .contain-sections").css("width",$("#project .presentation-project-container").offset().left+"px"),$("#project .title h2, #project .title .seperate, #project .title p, #project .title .client, #project .scroll-discover, #project .timeline-container").addClass("show"),setTimeout(function(){$(".detail-project").addClass("scroll");var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";$(window).bind(t,function(){$(".detail-project section:first-child").offset().top<0?$("#project .back-blur").addClass("blur"):$("#project .back-blur").removeClass("blur")}),$(".nav li button").click(function(){var o=$(this).attr("class"),e=-1;$(this).attr("data-other")&&(e=$(this).attr("data-other")),changeProject(o,t,e)}),$(".menu button").click(function(){slide($(".menuUl").attr("data-location"),$(this).attr("data-route"),!1,t)})},2e3)},1500)},4500)):(this.project=this.projectList.get(t),this.projectView=new ProjectView({model:this.project}),$("#project").html(this.projectView.render().el),setTimeout(function(){$("#project .presentation-project").addClass("show"),setTimeout(function(){$(".menu-button, #project .presentation-project div, #project .presentation-project .nav li").addClass("show")},500),setTimeout(function(){t%2===0?$("#project .contain-sections").css("width",$("#project").width()-$("#project .presentation-project-container").width()+"px"):$("#project .contain-sections").css("width",$("#project .presentation-project-container").offset().left+"px"),$("#project .title h2, #project .title .seperate, #project .title p, #project .title .client, #project .scroll-discover, #project .timeline-container").addClass("show"),setTimeout(function(){$(".detail-project").addClass("scroll");var t=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";$(window).bind(t,function(){$(".detail-project section:first-child").offset().top<0?$("#project .back-blur").addClass("blur"):$("#project .back-blur").removeClass("blur")}),$(".nav li button").click(function(){var o=$(this).attr("class"),e=-1;$(this).attr("data-other")&&(e=$(this).attr("data-other")),changeProject(o,t,e)}),$(".menu button").click(function(){slide($(".menuUl").attr("data-location"),$(this).attr("data-route"),!1,t)})},2e3)},1500)},500)),settings.detailProject=!0},contact:function(){initializeMap(),$(".menuUl").attr("data-location","contact"),settings.home!==!0?settings.projects===!0?(setTimeout(function(){$(".menu-button").addClass("show")},2300),setTimeout(function(){$(".presentation-contact, .contact #map, .presentation-contact h2.tit, .presentation-contact p.desc, .presentation-contact div.infos, .presentation-contact div.soc").addClass("show")},1800)):($(".home, .portfolio, .contact").addClass("slidedown"),$(".home, .portfolio, .contact").addClass("slidedown2"),$(".home .title h1, .home .title .seperate, .home .title p, .home .scrolldown, .home .made-by").addClass("show"),this.projectList.fetch({success:function(){$("#list-projects").html(new ProjectListView({model:settings.app.projectList}).render().el)}}),$(".presentation, .presentation h2, .presentation > p, .presentation .mourgues, .presentation .name").addClass("show"),showItemsProjects(!1),setTimeout(function(){$(".menu-button").addClass("show")},4500),setTimeout(function(){$(".presentation-contact, .contact #map, .presentation-contact h2.tit, .presentation-contact p.desc, .presentation-contact div.infos, .presentation-contact div.soc").addClass("show")},4e3)):settings.projects===!0?(setTimeout(function(){$(".menu-button").addClass("show")},2300),setTimeout(function(){$(".presentation-contact, .contact #map, .presentation-contact h2.tit, .presentation-contact p.desc, .presentation-contact div.infos, .presentation-contact div.soc").addClass("show")},1800)):(setTimeout(function(){$(".menu-button").addClass("show")},3e3),setTimeout(function(){$(".presentation-contact, .contact #map, .presentation-contact h2.tit, .presentation-contact p.desc, .presentation-contact div.infos, .presentation-contact div.soc").addClass("show")},2500)),detectMouseWheel("contact"),settings.contact=!0}});tpl.loadTemplates(["project-list-item","project-details"],function(){settings.app=new AppRouter,Backbone.history.start()}),loadingSite(),$(".menu-button").click(function(){changeMenuButton()}),$(".menu button").click(function(){slide($(".menuUl").attr("data-location"),$(this).attr("data-route"),!1,-1)});